<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Philippine Snake Classification System</title>
  <link rel="stylesheet" href="css/home.css" />
  <style>

  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
  <div class="container">
    <header class="app-header">
      <div class="app-branding">
        <i class="fas fa-snake logo"></i>
        <div class="app-title">
          <h1>Philippine Snake Classification System</h1>
          <span>AI-powered snake identification system</span>
        </div>
      </div>
      <nav class="nav-links">
        <a href="snake-classifierv1.html" class="nav-link active">
          <i class="fas fa-home"></i> Home
        </a>
        <a href="about.html" class="nav-link">
          <i class="fas fa-info-circle"></i> About
        </a>
      </nav>
    </header>

    <main>
      <section class="upload-section panel">
        <div class="section-header">
          <div>
            <h2 class="section-title">
              <i class="fas fa-camera"></i> Image Upload
            </h2>
            <p class="section-subtitle">Upload a clear image of the snake for identification</p>
          </div>
        </div>

        <div class="stepper">
          <div class="step active">
            <div class="step-number">1</div>
            <div class="step-label">Upload</div>
          </div>
          <div class="step">
            <div class="step-number">2</div>
            <div class="step-label">Analyze</div>
          </div>
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-label">Results</div>
          </div>
        </div>

        <div class="drop-area" id="dropArea">
          <div class="upload-icon">
            <i class="fas fa-cloud-upload-alt"></i>
          </div>
          <div class="upload-text">
            <h3>Drop image here</h3>
            <p>or click to browse files from your device</p>
          </div>
          <div class="upload-formats">
            <span class="format-badge">JPEG</span>
            <span class="format-badge">JPG</span>
            <span class="format-badge">PNG</span>
          </div>
          <input type="file" id="fileInput" accept="image/*" style="display: none" />
        </div>

        <div class="preview-container" id="previewContainer">
          <img src="/api/placeholder/400/300" alt="Snake image preview" class="preview-image" id="previewImage" />
          <div class="preview-controls">
            <div class="preview-control remove" id="removeImageBtn" title="Remove image">
              <i class="fas fa-times"></i>
            </div>
          </div>
        </div>

        <!-- Add GradCAM visualization container -->
        <div class="gradcam-container" id="gradcamContainer">
          <div class="gradcam-header">
            <i class="fas fa-eye"></i>
            <span>What the AI Focused On</span>
          </div>
          <img src="images/gradcam_ph_cobra.png" alt="GradCAM visualization" class="gradcam-image" id="gradcamImage" />
        </div>

        <div class="button-container">
          <button class="btn btn-primary" id="analyzeBtn" disabled>
            <span class="analyze-text">
              <i class="fas fa-search"></i> Classify Snake
            </span>
            <span class="spinner-container">
              <div class="spinner"></div>
              <span>Analyzing...</span>
            </span>
          </button>
          <button class="btn btn-outline" id="resetBtn">
            <i class="fas fa-redo"></i> Reset
          </button>
        </div>
      </section>

      <section class="result-section panel">
        <div class="section-header">
          <div>
            <h2 class="section-title">
              <i class="fas fa-clipboard-list"></i> Classification Results
            </h2>
          </div>
        </div>

        <div class="result-content">
          <div class="result-placeholder" id="resultPlaceholder">
            <i class="fas fa-search"></i>
            <p>
              Upload a snake image on the left panel to see identification results
            </p>
          </div>

          <div class="classification-result" id="classificationResult">
            <div class="species-card venomous">
              <div class="species-header">
                <div class="species-icon">
                  <i class="fas fa-skull-crossbones"></i>
                </div>
                <div class="species-name">
                  <h3>Philippine Cobra</h3>
                  <p>Naja philippinensis</p>
                  <span class="species-family">Family: Elapidae</span>
                </div>
                <div class="confidence-container">
                  <div class="confidence">82.3%</div>
                </div>
              </div>
              <div class="species-details">
                <div class="venomous-status">Venomous</div>
                <div class="species-description">
                  Belongs to the genus Naja (family Elapidae). Characterized by dorsal scales arranged in 21-23
                  longitudinal rows at midbody with black or dark brown dorsal coloration.
                </div>
              </div>
            </div>

            <!-- Alternative species section -->
            <div class="alternative-species">
              <div class="alternative-header">
                <i class="fas fa-list-alt"></i>
                Other Possible Species
              </div>
              <div class="alternative-explanation">
                <strong>Why these species?</strong> These alternatives were selected based on the model’s predictions,
                representing other species with similar visual features that the model considered likely matches during
                classification.
              </div>

              <div class="alternative-list">
                <div class="alternative-item">
                  <div class="alternative-item-header">
                    <div class="alternative-name">
                      <h4>
                        Philippine Rat Snake
                        <span class="venomous-indicator is-non-venomous">Non-venomous</span>
                      </h4>
                      <p>Coelognathus erythrurus</p>
                      <span class="alternative-family">Family: Colubridae</span>
                    </div>
                    <div class="alternative-confidence-container">
                      <div class="alternative-confidence">9.5%</div>
                      <button class="accordion-toggle">
                        <i class="fas fa-chevron-down"></i>
                      </button>
                    </div>
                  </div>
                  <div class="accordion-content">
                    <p class="snake-description">
                      The Philippine Rat Snake is a non-venomous colubrid often visually confused with the Philippine
                      Cobra due to similarities in coloration and body shape. Adults of C. e. erythrurus have a tail
                      lighter than the posterior body, while other subspecies may appear uniformly light brown to
                      reddish brown, or darken toward the tail.
                    </p>
                  </div>
                </div>

                <div class="alternative-item">
                  <div class="alternative-item-header">
                    <div class="alternative-name">
                      <h4>
                        Samar Cobra
                        <span class="venomous-indicator is-venomous">Venomous</span>
                      </h4>
                      <p>Naja samarensis</p>
                      <span class="alternative-family">Family: Elapidae</span>
                    </div>
                    <div class="alternative-confidence-container">
                      <div class="alternative-confidence">4.2%</div>
                      <button class="accordion-toggle">
                        <i class="fas fa-chevron-down"></i>
                      </button>
                    </div>
                  </div>
                  <div class="accordion-content">
                    <p class="snake-description">
                      Features light-yellow ventral scales anteriorly followed by a black band that fades posteriorly.
                      Belongs to genus Naja (family Elapidae).
                    </p>
                  </div>
                </div>

                <div class="alternative-item">
                  <div class="alternative-item-header">
                    <div class="alternative-name">
                      <h4>
                        Equatorial Cobra
                        <span class="venomous-indicator is-venomous">Venomous</span>
                      </h4>
                      <p>Naja sumatrana</p>
                      <span class="alternative-family">Family: Elapidae</span>
                    </div>
                    <div class="alternative-confidence-container">
                      <div class="alternative-confidence">2.8%</div>
                      <button class="accordion-toggle">
                        <i class="fas fa-chevron-down"></i>
                      </button>
                    </div>
                  </div>
                  <div class="accordion-content">
                    <p class="snake-description">
                      Dorsal scales in 17–25 longitudinal rows at midbody. Postnasal scale vertically elongate,
                      separated/narrowly contacting prefrontal scale. Lacks anterior black ventral band. 178–189 ventral
                      scales.
                    </p>
                  </div>
                </div>

                <div class="alternative-item">
                  <div class="alternative-item-header">
                    <div class="alternative-name">
                      <h4>
                        Common Wolf Snake
                        <span class="venomous-indicator is-non-venomous">Non-venomous</span>
                      </h4>
                      <p>Lycodon capucinus</p>
                      <span class="alternative-family">Family: Colubridae</span>
                    </div>
                    <div class="alternative-confidence-container">
                      <div class="alternative-confidence">1.2%</div>
                      <button class="accordion-toggle">
                        <i class="fas fa-chevron-down"></i>
                      </button>
                    </div>
                  </div>
                  <div class="accordion-content">
                    <p class="snake-description">
                      The Common Wolf Snake is a small, non-venomous snake often confused with cobras due to its similar
                      markings and defensive posture. Distinguished by its relatively short length and smooth scales,
                      this species typically has fewer than 100 pairs of subcaudal scales.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
  </div>
  </section>
  </main>

  <footer class="footer">
    <p><strong>Philippine Snake Classification System © 2025 | System Prototype</strong></p>
    <p>
      This tool is intended as a clinical decision support system only. Always use clinical judgment and follow
      established protocols.
    </p>
  </footer>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // DOM elements
      const elements = {
        dropArea: document.getElementById("dropArea"),
        fileInput: document.getElementById("fileInput"),
        previewContainer: document.getElementById("previewContainer"),
        previewImage: document.getElementById("previewImage"),
        gradcamContainer: document.getElementById("gradcamContainer"),
        analyzeBtn: document.getElementById("analyzeBtn"),
        resetBtn: document.getElementById("resetBtn"),
        removeImageBtn: document.getElementById("removeImageBtn"),
        resultPlaceholder: document.getElementById("resultPlaceholder"),
        classificationResult: document.getElementById("classificationResult"),
        stepper: document.querySelectorAll(".step")
      };

      // Event handlers
      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }

      function highlight() {
        elements.dropArea.classList.add("active");
      }

      function unhighlight() {
        elements.dropArea.classList.remove("active");
      }

      function updateStepperState(step) {
        elements.stepper.forEach((stepElement, index) => {
          if (index < step) {
            stepElement.classList.add("completed");
            stepElement.classList.remove("active");
          } else if (index === step) {
            stepElement.classList.add("active");
            stepElement.classList.remove("completed");
          } else {
            stepElement.classList.remove("active", "completed");
          }
        });
      }

      function handleFiles(files) {
        if (files.length > 0) {
          const file = files[0];
          if (file.type.startsWith("image/")) {
            const reader = new FileReader();
            reader.onload = function (e) {
              elements.previewImage.src = e.target.result;
              elements.previewContainer.classList.add("active");
              elements.dropArea.style.display = "none";
              elements.analyzeBtn.disabled = false;
              updateStepperState(1);
            };
            reader.readAsDataURL(file);
          }
        }
      }

      function resetUI() {
        elements.previewContainer.classList.remove("active");
        elements.gradcamContainer.classList.remove("active");
        elements.dropArea.style.display = "block";
        elements.analyzeBtn.disabled = true;
        elements.fileInput.value = "";
        elements.classificationResult.classList.remove("active");
        elements.resultPlaceholder.style.display = "flex";
        updateStepperState(0);
        elements.analyzeBtn.classList.remove("analyzing");
      }

      function analyzeImage() {
        elements.analyzeBtn.classList.add("analyzing");

        // Simulate loading time
        setTimeout(() => {
          elements.resultPlaceholder.style.display = "none";
          elements.classificationResult.classList.add("active");
          elements.gradcamContainer.classList.add("active");
          elements.analyzeBtn.classList.remove("analyzing");
          updateStepperState(2);
        }, 2000);
      }

      // Set up event listeners
      elements.dropArea.addEventListener("click", () => elements.fileInput.click());
      elements.fileInput.addEventListener("change", (e) => handleFiles(e.target.files));
      elements.resetBtn.addEventListener("click", resetUI);
      elements.removeImageBtn.addEventListener("click", resetUI);
      elements.analyzeBtn.addEventListener("click", analyzeImage);

      // Prevent default drag behaviors
      ["dragenter", "dragover", "dragleave", "drop"].forEach((eventName) => {
        elements.dropArea.addEventListener(eventName, preventDefaults, false);
      });

      // Highlight drop area when item is dragged over it
      ["dragenter", "dragover"].forEach((eventName) => {
        elements.dropArea.addEventListener(eventName, highlight, false);
      });

      ["dragleave", "drop"].forEach((eventName) => {
        elements.dropArea.addEventListener(eventName, unhighlight, false);
      });

      // Handle dropped files
      elements.dropArea.addEventListener("drop", (e) => handleFiles(e.dataTransfer.files));
    });

    // Set up accordion functionality for alternative species
    const accordionToggles = document.querySelectorAll('.accordion-toggle');
    const accordionHeaders = document.querySelectorAll('.alternative-item-header');

    // Add click handler for the toggle buttons
    accordionToggles.forEach(toggle => {
      toggle.addEventListener('click', function (e) {
        e.stopPropagation(); // Prevent event bubbling to the header
        toggleAccordion(this);
      });
    });

    // Also allow clicking the header to toggle
    accordionHeaders.forEach(header => {
      header.addEventListener('click', function () {
        const toggle = this.querySelector('.accordion-toggle');
        toggleAccordion(toggle);
      });
    });

    function toggleAccordion(toggleElement) {
      const content = toggleElement.closest('.alternative-item').querySelector('.accordion-content');

      // Toggle active class
      toggleElement.classList.toggle('active');
      content.classList.toggle('active');

      // Adjust height for animation
      if (content.classList.contains('active')) {
        content.style.maxHeight = content.scrollHeight + "px";
      } else {
        content.style.maxHeight = 0;
      }
    }
  </script>
</body>

</html>